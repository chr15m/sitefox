<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>sitefox.auth documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Sitefox</span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="README.html"><div class="inner"><span>Readme</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 branch"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span></span></div></div></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sitefox</span></div></div></li><li class="depth-2 branch current"><a href="sitefox.auth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></a></li><li class="depth-2 branch"><a href="sitefox.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2 branch"><a href="sitefox.deps.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deps</span></div></a></li><li class="depth-2 branch"><a href="sitefox.html.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>html</span></div></a></li><li class="depth-2 branch"><a href="sitefox.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-2 branch"><a href="sitefox.mail.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mail</span></div></a></li><li class="depth-2 branch"><a href="sitefox.reloader.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reloader</span></div></a></li><li class="depth-2 branch"><a href="sitefox.tracebacks.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tracebacks</span></div></a></li><li class="depth-2 branch"><a href="sitefox.ui.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ui</span></div></a></li><li class="depth-2 branch"><a href="sitefox.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><a href="sitefox.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="sitefox.auth.html#var-add-messages.21"><div class="inner"><span>add-messages!</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Aerror"><div class="inner"><span>component:error</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Amessages"><div class="inner"><span>component:messages</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Areset-password-email"><div class="inner"><span>component:reset-password-email</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Areset-password-email-form"><div class="inner"><span>component:reset-password-email-form</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Areset-password-email-form-done"><div class="inner"><span>component:reset-password-email-form-done</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Areset-password-form"><div class="inner"><span>component:reset-password-form</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Asign-in-form"><div class="inner"><span>component:sign-in-form</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Asign-up-email"><div class="inner"><span>component:sign-up-email</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Asign-up-form"><div class="inner"><span>component:sign-up-form</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Asign-up-form-done"><div class="inner"><span>component:sign-up-form-done</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Asign-up-success"><div class="inner"><span>component:sign-up-success</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-component.3Asimple-message"><div class="inner"><span>component:simple-message</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-create-user"><div class="inner"><span>create-user</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-decrypt-for-transit"><div class="inner"><span>decrypt-for-transit</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-deserialize-user"><div class="inner"><span>deserialize-user</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-encrypt-for-transit"><div class="inner"><span>encrypt-for-transit</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-get-or-create-user-by-key"><div class="inner"><span>get-or-create-user-by-key</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-get-user-by-key"><div class="inner"><span>get-user-by-key</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-hash-password"><div class="inner"><span>hash-password</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-make-hmac-token"><div class="inner"><span>make-hmac-token</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-make-middleware.3Areset-password-send-email"><div class="inner"><span>make-middleware:reset-password-send-email</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-make-middleware.3Asign-up-email"><div class="inner"><span>make-middleware:sign-up-email</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-make-middleware.3Asigned-in-redirect"><div class="inner"><span>make-middleware:signed-in-redirect</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-middleware.3Afinalize-sign-up"><div class="inner"><span>middleware:finalize-sign-up</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-middleware.3Areset-password-email-submit"><div class="inner"><span>middleware:reset-password-email-submit</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-middleware.3Areset-password-submit"><div class="inner"><span>middleware:reset-password-submit</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-middleware.3Asign-in-submit"><div class="inner"><span>middleware:sign-in-submit</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-middleware.3Asign-up-submit"><div class="inner"><span>middleware:sign-up-submit</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-middleware.3Aupdate-password"><div class="inner"><span>middleware:update-password</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-middleware.3Averify-reset-password"><div class="inner"><span>middleware:verify-reset-password</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-middleware.3Averify-sign-up"><div class="inner"><span>middleware:verify-sign-up</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-save-user"><div class="inner"><span>save-user</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-serialize-user"><div class="inner"><span>serialize-user</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-setup-auth"><div class="inner"><span>setup-auth</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-setup-email-based-auth"><div class="inner"><span>setup-email-based-auth</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-setup-reset-password"><div class="inner"><span>setup-reset-password</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-timestamp-expired.3F"><div class="inner"><span>timestamp-expired?</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-validate-post-data"><div class="inner"><span>validate-post-data</span></div></a></li><li class="depth-1"><a href="sitefox.auth.html#var-verify-kv-email-user"><div class="inner"><span>verify-kv-email-user</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">sitefox.auth</h1><div class="doc"><div class="markdown"><p>Built-in authentication wrapping passport.js - so far email + password based authentication is supported out of the box:</p>
<pre><code>  (auth/setup-auth app)
  (auth/setup-email-based-auth app template "main")
  (auth/setup-reset-password app template "main")
</code></pre>
</div></div><div class="public anchor" id="var-add-messages.21"><h3>add-messages!</h3><div class="usage"><code>(add-messages! req messages)</code></div><div class="doc"><div class="markdown"><p>Add messages to be displayed during the authentication process.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L165">view source</a></div></div><div class="public anchor" id="var-component.3Aerror"><h3>component:error</h3><div class="usage"><code>(component:error errors k)</code></div><div class="doc"><div class="markdown"><p>Reagent component to display an error message for a field validation error.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L428">view source</a></div></div><div class="public anchor" id="var-component.3Amessages"><h3>component:messages</h3><div class="usage"><code>(component:messages req)</code></div><div class="doc"><div class="markdown"><p>Reagent component to display messages related to authentication.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L434">view source</a></div></div><div class="public anchor" id="var-component.3Areset-password-email"><h3>component:reset-password-email</h3><div class="usage"><code>(component:reset-password-email req verify-url)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L541">view source</a></div></div><div class="public anchor" id="var-component.3Areset-password-email-form"><h3>component:reset-password-email-form</h3><div class="usage"><code>(component:reset-password-email-form req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L524">view source</a></div></div><div class="public anchor" id="var-component.3Areset-password-email-form-done"><h3>component:reset-password-email-form-done</h3><div class="usage"><code>(component:reset-password-email-form-done req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L548">view source</a></div></div><div class="public anchor" id="var-component.3Areset-password-form"><h3>component:reset-password-form</h3><div class="usage"><code>(component:reset-password-form req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L556">view source</a></div></div><div class="public anchor" id="var-component.3Asign-in-form"><h3>component:sign-in-form</h3><div class="usage"><code>(component:sign-in-form req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L453">view source</a></div></div><div class="public anchor" id="var-component.3Asign-up-email"><h3>component:sign-up-email</h3><div class="usage"><code>(component:sign-up-email req verify-url)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L502">view source</a></div></div><div class="public anchor" id="var-component.3Asign-up-form"><h3>component:sign-up-form</h3><div class="usage"><code>(component:sign-up-form req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L477">view source</a></div></div><div class="public anchor" id="var-component.3Asign-up-form-done"><h3>component:sign-up-form-done</h3><div class="usage"><code>(component:sign-up-form-done req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L509">view source</a></div></div><div class="public anchor" id="var-component.3Asign-up-success"><h3>component:sign-up-success</h3><div class="usage"><code>(component:sign-up-success _req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L517">view source</a></div></div><div class="public anchor" id="var-component.3Asimple-message"><h3>component:simple-message</h3><div class="usage"><code>(component:simple-message req)</code></div><div class="doc"><div class="markdown"><p>Reagent component to display messages related to authentication.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L445">view source</a></div></div><div class="public anchor" id="var-create-user"><h3>create-user</h3><div class="usage"><code>(create-user auth-key-type auth-key &amp; [user-data])</code></div><div class="doc"><div class="markdown"><p>Creates a new user object in the user’s kv table. Creates a lookup from <code>auth-key</code> to <code>user-id</code> for convenient retrieval using <code>get-user-by-key</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L195">view source</a></div></div><div class="public anchor" id="var-decrypt-for-transit"><h3>decrypt-for-transit</h3><div class="usage"><code>(decrypt-for-transit encrypted)</code></div><div class="doc"><div class="markdown"><p>Decrypts a piece of data using symmetric key cryptography and the server’s own secret.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L78">view source</a></div></div><div class="public anchor" id="var-deserialize-user"><h3>deserialize-user</h3><div class="usage"><code>(deserialize-user user cb)</code></div><div class="doc"><div class="markdown"><p>Internal function used by passport to retrieve the user’s full data from the session.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L177">view source</a></div></div><div class="public anchor" id="var-encrypt-for-transit"><h3>encrypt-for-transit</h3><div class="usage"><code>(encrypt-for-transit materials)</code></div><div class="doc"><div class="markdown"><p>Encrypts a piece of data for transit using symmetric key cryptography and the server’s own secret.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L56">view source</a></div></div><div class="public anchor" id="var-get-or-create-user-by-key"><h3>get-or-create-user-by-key</h3><div class="usage"><code>(get-or-create-user-by-key auth-key-type auth-key &amp; [user-data])</code></div><div class="doc"><div class="markdown"><p>Try to find a user object by it’s <code>auth-key</code> (i.e. username/email) and create a new user with that <code>auth-key</code> if it can’t be found.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L208">view source</a></div></div><div class="public anchor" id="var-get-user-by-key"><h3>get-user-by-key</h3><div class="usage"><code>(get-user-by-key auth-key-type auth-key)</code></div><div class="doc"><div class="markdown"><p>Get a user object from the user’s kv table. The <code>auth-key</code> is the lookup token such as email or username.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L185">view source</a></div></div><div class="public anchor" id="var-hash-password"><h3>hash-password</h3><div class="usage"><code>(hash-password pw &amp; [salt])</code></div><div class="doc"><div class="markdown"><p>Hash a password for storage in a database. If <code>salt</code> (hex string) is not supplied it will be generated (it should be passed when comparing but not when generating).</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L35">view source</a></div></div><div class="public anchor" id="var-make-hmac-token"><h3>make-hmac-token</h3><div class="usage"><code>(make-hmac-token secret size &amp; materials)</code></div><div class="doc"><div class="markdown"><p>Create an HMAC token to be used for verifying data was generated by the server and is unmodified.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L24">view source</a></div></div><div class="public anchor" id="var-make-middleware.3Areset-password-send-email"><h3>make-middleware:reset-password-send-email</h3><div class="usage"><code>(make-middleware:reset-password-send-email reset-password-email-component email-subject from-address)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L343">view source</a></div></div><div class="public anchor" id="var-make-middleware.3Asign-up-email"><h3>make-middleware:sign-up-email</h3><div class="usage"><code>(make-middleware:sign-up-email email-view-component email-subject from-address)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L273">view source</a></div></div><div class="public anchor" id="var-make-middleware.3Asigned-in-redirect"><h3>make-middleware:signed-in-redirect</h3><div class="usage"><code>(make-middleware:signed-in-redirect redirect-url)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L251">view source</a></div></div><div class="public anchor" id="var-middleware.3Afinalize-sign-up"><h3>middleware:finalize-sign-up</h3><div class="usage"><code>(middleware:finalize-sign-up req _res done)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L319">view source</a></div></div><div class="public anchor" id="var-middleware.3Areset-password-email-submit"><h3>middleware:reset-password-email-submit</h3><div class="usage"><code>(middleware:reset-password-email-submit req _res done)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L334">view source</a></div></div><div class="public anchor" id="var-middleware.3Areset-password-submit"><h3>middleware:reset-password-submit</h3><div class="usage"><code>(middleware:reset-password-submit req _res done)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L394">view source</a></div></div><div class="public anchor" id="var-middleware.3Asign-in-submit"><h3>middleware:sign-in-submit</h3><div class="usage"><code>(middleware:sign-in-submit req res done)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L239">view source</a></div></div><div class="public anchor" id="var-middleware.3Asign-up-submit"><h3>middleware:sign-up-submit</h3><div class="usage"><code>(middleware:sign-up-submit req _res done)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L259">view source</a></div></div><div class="public anchor" id="var-middleware.3Aupdate-password"><h3>middleware:update-password</h3><div class="usage"><code>(middleware:update-password req _res done)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L405">view source</a></div></div><div class="public anchor" id="var-middleware.3Averify-reset-password"><h3>middleware:verify-reset-password</h3><div class="usage"><code>(middleware:verify-reset-password req _res done)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L371">view source</a></div></div><div class="public anchor" id="var-middleware.3Averify-sign-up"><h3>middleware:verify-sign-up</h3><div class="usage"><code>(middleware:verify-sign-up req _res done)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L303">view source</a></div></div><div class="public anchor" id="var-save-user"><h3>save-user</h3><div class="usage"><code>(save-user user-data)</code></div><div class="doc"><div class="markdown"><p>Persist a user object back into the users kv table, overwriting the existing object.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L214">view source</a></div></div><div class="public anchor" id="var-serialize-user"><h3>serialize-user</h3><div class="usage"><code>(serialize-user user cb)</code></div><div class="doc"><div class="markdown"><p>Internal function used by passport to store a user reference in the session.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L172">view source</a></div></div><div class="public anchor" id="var-setup-auth"><h3>setup-auth</h3><div class="usage"><code>(setup-auth app &amp; [sign-out-redirect-url])</code></div><div class="doc"><div class="markdown"><p>Set up passport based authentication. The <code>sign-out-redirect-url</code> defaults to ‘/’.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L577">view source</a></div></div><div class="public anchor" id="var-setup-email-based-auth"><h3>setup-email-based-auth</h3><div class="usage"><code>(setup-email-based-auth app template selector &amp; [{:keys [sign-in-redirect sign-in-form-component sign-up-redirect sign-up-email-component sign-up-email-subject sign-up-from-address sign-up-form-component sign-up-form-done-component simple-message-component]}])</code></div><div class="doc"><div class="markdown"><p>Set up passport email based authentication with all of the required forms and views. Pass in an HTML <code>template</code> string and <code>selector</code> where the auth UI should be be mounted.</p>
<p>You can override various aspects of the UI using these keys:</p>
<ul>
<li><code>:sign-in-redirect</code> is the URL to redirect to after signing in (defaults to <code>/</code>).</li>
<li><code>:sign-up-redirect</code> is the URL to redirect to after signing up successfully (defaults to <code>/</code>).</li>
<li><code>:sign-in-form-component</code> is a Reagent component to render the sign-in form (defaults to <code>component:sign-in-form</code>).</li>
<li><code>:sign-up-email-component</code> is a Reagent component to render the sign-up validation email (defaults to <code>component:sign-up-email</code>).</li>
<li><code>:sign-up-email-subject</code> the subject line of the sign up verification email (defaults to <code>req.hostname + ' signup email.'</code>).</li>
<li><code>:sign-up-form-component</code> is a Reagent component to render the sign-up form (defaults to <code>component:sign-up-form</code>).</li>
<li><code>:sign-up-form-done-component</code> is a Reagent component to render the sign-up done page (defaults to <code>component:sign-up-form-done</code>).</li>
<li><code>:simple-message-component</code> is a Reagent component to render error messages during the verification stage (defaults to <code>component:simple-message</code>).</li>
</ul>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L589">view source</a></div></div><div class="public anchor" id="var-setup-reset-password"><h3>setup-reset-password</h3><div class="usage"><code>(setup-reset-password app template selector &amp; [{:keys [reset-password-redirect reset-password-email-subject reset-password-from-address reset-password-email-component reset-password-email-form-component reset-password-email-form-done-component reset-password-form-component simple-message-component]}])</code></div><div class="doc"><div class="markdown"><p>Add a ‘reset password’ flow to the app. Covers both ‘change password’ and ‘forgot password’ functionality. Pass in an HTML <code>template</code> string and <code>selector</code> where the auth UI should be mounted.</p>
<p>You can override various aspects of the UI using these keys:</p>
<ul>
<li><code>:reset-redirect</code> is the URL to redirect to after the password has been reset successfully (defaults to <code>/</code>).</li>
<li><code>:reset-password-email-form-component</code> is a Reagent component to render the reset-password email form (defaults to <code>component:reset-password-email-form</code>).</li>
<li><code>:reset-password-form-component</code> is a Reagent component to render the reset-password form (defaults to <code>component:reset-password-form</code>).</li>
<li><code>:simple-message-component</code> is a Reagent component to render error messages during the password reset process (defaults to <code>component:simple-message-component</code>).</li>
</ul>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L630">view source</a></div></div><div class="public anchor" id="var-timestamp-expired.3F"><h3>timestamp-expired?</h3><div class="usage"><code>(timestamp-expired? time-stamp milliseconds)</code></div><div class="doc"><div class="markdown"><p>Check if a timestamp (ms) has expired.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L127">view source</a></div></div><div class="public anchor" id="var-validate-post-data"><h3>validate-post-data</h3><div class="usage"><code>(validate-post-data req fields &amp; [warnings])</code></div><div class="doc"><div class="markdown"><p>Uses node-input-validator to validated post data and returns any validation errors. <code>fields</code> is a structure following the input validator format like: <code>{:email ["required" "email"]}</code>. <code>warnings</code> is similarly a structure overriding the default warnings like: <code>{:email "You must supply a valid email address"}</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L147">view source</a></div></div><div class="public anchor" id="var-verify-kv-email-user"><h3>verify-kv-email-user</h3><div class="usage"><code>(verify-kv-email-user email password cb)</code></div><div class="doc"><div class="markdown"><p>Verify the user’s supplied email and password against that in the database.</p>
</div></div><div class="src-link"><a href="https://github.com/chr15m/sitefox/blob/master/src/sitefox/auth.cljs#L223">view source</a></div></div></div></body></html>